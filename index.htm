<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google OAuth Login</title>
</head>
<body>
    <h1>Google 登入</h1>
    <div id="login-status"></div>
    <script>
        // 取得用戶輸入的帳號，這裡應該是從手機傳來
        var inputEmail = ''; // 手機應用輸入的帳號應在此接收

        // Google OAuth 配置
        var clientId = 'YOUR_GOOGLE_CLIENT_ID';
        var redirectUri = 'https://<your-username>.github.io/<your-repo-name>/callback';
        var authorizationUrl = 'https://accounts.google.com/o/oauth2/auth?client_id=' + clientId + '&redirect_uri=' + redirectUri + '&response_type=token&scope=https://www.googleapis.com/auth/userinfo.email';

        // 將用戶重定向到 Google 登入頁面
        window.location.href = authorizationUrl;

        // 授權回調處理，當 Google OAuth 回調發生時
        if (window.location.hash) {
            var hash = window.location.hash.substring(1);
            var params = new URLSearchParams(hash);
            var accessToken = params.get('access_token');

            if (accessToken) {
                // 使用訪問 token 獲取用戶資訊
                fetch('https://www.googleapis.com/oauth2/v1/userinfo?access_token=' + accessToken)
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('login-status').textContent = '用戶 ' + data.email + ' 登入成功';

                        // 在此處比對從手機傳來的帳號，並告知是否匹配
                        if (data.email === inputEmail) {
                            alert('登入成功！帳號匹配。');
                        } else {
                            alert('登入失敗，帳號不匹配。');
                        }
                    })
                    .catch(error => {
                        console.error('錯誤:', error);
                    });
            }
        }
    </script>
</body>
</html>
